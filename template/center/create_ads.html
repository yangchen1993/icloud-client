<link rel="stylesheet" href="/css/buttons.css">
<link rel="stylesheet" href="/css/phone_cms.css">
<style>
    #edit{
        margin-top:10px;
        width:100%;
        height:450px;
        background: #f0f0f0;
    }
</style>
<!--<div class="w_header">-->
<!--<span class="h4">自媒体广告</span>-->
<!--</div>-->
<!--<div class="w_content">-->
<!--<div class="col-md-4">-->
<!--<div class="form-inline">-->
<!--<label>-->
<!--<input type="radio" name="adtype" checked="checked">-->
<!--<span>编辑广告</span>-->
<!--</label>-->
<!--<label>-->
<!--<input type="radio" name="adtype">-->
<!--<span>系统默认广告</span>-->
<!--</label>-->
<!--</div>-->

<!--<span>广告标题：</span>-->
<!--<input type="text" class="form-control" ng-model="adToEdit.title">-->
<!--<span>广告链接地址：</span>-->
<!--<input type="text" class="form-control" placeholder="如www.abc.com" ng-model="adToEdit.link">-->
<!--<span>广告行业：</span>-->
<!--<select class="form-control" ng-model="adToEdit.category" ng-options="v.name as v.name for v in ad_category">-->
<!--<option value="">请选择你的广告行业</option>-->
<!--</select>-->
<!--<span>广告简介：</span>-->
<!--<textarea class="form-control" rows="3" ng-model="adToEdit.brief"></textarea>-->
<!--</div>-->
<!--<div class="col-md-5">-->
<!--<div id="crop-avatar">-->
<!--<div id="avatar-modal" role="dialog" tabindex="-1">-->
<!--<form class="avatar-form" enctype="multipart/form-data" method="post">-->
<!--<div class="avatar-upload">-->
<!--<div class="form-inline">-->
<!--<label  class="h4">请选择一个图像文件</label>-->
<!--<input type="file" class="avatar-input" id="avatarInput" name="avatar_file">-->
<!--</div>-->
<!--</div>-->
<!--<div class="avatar-wrapper"></div>-->
<!--<img src="/img/phone.png" class="model_p">-->
<!--<div class="avatar-preview preview-lg"></div>-->
<!--<button type="button" class="btn btn-success btn-block" ng-click="uploadImg(adToEdit)">确定</button>-->

<!--</form>-->
<!--</div>-->
<!--</div>-->

<!--</div>-->
<!--</div>-->

<!--<script src="/bower_components/cropper/dist/cropper.min.js"></script>-->
<!--<script src="/js/phone.js"></script>-->
<!--<script>-->
    <!--$(".avatar-preview").append('<img ng-src="{{adToEdit.img}}">')-->
<!--</script>-->

<div style="padding: 10px">
    <ol class="breadcrumb">
        <li><a ui-sref="main.ads">我的广告</a></li>
        <li class="active">新建广告</li>
    </ol>
    <div class="row">


        <div class="col-md-4">
        <!--<div class="avatar-preview preview-lg"></div>-->
            <div class="phone">
                <div class="phone-page">
                    <!--手机装饰-->
                    <div class="phone-ear">
                        <span class="phone-camera"></span><span class="phone-sound"></span>
                    </div>
                    <!--以下的phone-warp是直接添加到数据库的部分-->
                    <div class="phone-warp">
                        <div class="phone-content">
                            <!-- 预览区-->
                        </div>
                    </div>
                    <div class="phone-button">
                        <div class="circle-button"></div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-4">
            <!--<div id="crop-avatar">-->
            <!--<div id="avatar-modal" role="dialog" tabindex="-1">-->
            <!--<div class="avatar-upload">-->
            <!--<div class="form-inline">-->
            <!--<label class="h4">请选择一个图像文件</label>-->
            <!--<input type="file" class="avatar-input" id="avatarInput" name="avatar_file">-->
            <!--</div>-->
            <!--</div>-->
            <!--<div class="avatar-wrapper"></div>-->
            <!--&lt;!&ndash;<img src="/img/phone.png" class="create_ads_phone">&ndash;&gt;-->
            <!--</div>-->
            <!--</div>-->
            <div class="form-inline">
                <label for="imgUpload" class="button button-primary">上传图片</label>
                <input type="file" class="hidden" id="imgUpload">
            </div>
            <div id="edit">

            </div>
        </div>
        <div class="col-md-4 create_ads_panel">
            <div class="form-inline">
                <span>广告标题：</span>
                <input class="form-control" type="text">
            </div>
            <div class="form-inline">
                <span>广告链接地址：</span>
                <input class="form-control" type="text" style="width: 300px">
            </div>
            <div class="form-inline">
                <span>广告行业：</span>
                <select class="form-control" ng-model="ads.id" ng-options="v.id as v.name for v in category">
                </select>
            </div>
            <div class="form-inline">
                <span>广告简介：</span>
                <textarea class="form-control" type="text"></textarea>
            </div>

            <div>
                <button class="button button-primary" id="save-ad">保存广告</button>
            </div>
        </div>
    </div>

</div>
<!--<script src="/bower_components/cropper/dist/cropper.min.js"></script>-->
<!--<script src="/js/phone.js"></script>-->
<!--<script>-->
    <!--$(".avatar-preview").append('<img ng-src="{{adToEdit.img}}">')-->
<!--</script>-->
<script>
    $('#imgUpload').change(function(){
        var file;
        var files;
        files=$(this).prop('files');
        if(files.length>0){
            file=files[0];
            this.url=URL.createObjectURL(file);
            console.log(this.url);
        }
        var img=$('<img id="showImg" src="'+this.url+'">');
        $('#edit').html(img);
        img.cropper({
            aspectRatio: 640/960,
            strict: false,
            crop: function (e) {
                var json = [
                    '{"x":' + e.x,
                    '"y":' + e.y,
                    '"height":' + e.height,
                    '"width":' + e.width,
                    '"rotate":' + e.rotate + '}'
                ].join();
                console.log(json)
            }
        });
        $("#save-ad").on('click',function(){
            var imgData=img.cropper('getCroppedCanvas',{
                width:640
            }).toDataURL();
        })
    });
</script>